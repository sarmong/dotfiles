#!/usr/bin/env bash

texts=(
  " lock screen"
  " log out"
  " suspend"
  " hibernate"
  " reboot"
  "\\uf011 shut down"
)

confirm() {
  [ -z "$1" ] && exit 1

  item=${texts[${1}]:1}
  answer=$(echo -e "Yes,$item\nNo, cancel" | rofi -dmenu -format i)

  [ "$answer" != 0 ] && exit 1
}

IFS=$'\n'
selected=$(echo "${texts[*]}" | rofi -dmenu -format i)

confirm "${selected}"

case "$selected" in
  0) betterlockscreen --lock ;;
  1) bspc quit ;;
  2) systemctl suspend ;;
  3) systemctl hibernate ;;
  4) systemctl reboot ;;
  5) systemctl poweroff ;;
  *) exit 1 ;;
esac
